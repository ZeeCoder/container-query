language: node_js
sudo: false
node_js: [8, 10]
addons:
  chrome: stable
script:
  - lerna bootstrap --ignore={demos}
  - yarn test:unit
  - lerna run test
  - node ./tests/bin/is-first-ci-job.js && yarn test:integration:build || echo
  - node ./tests/bin/is-first-ci-job.js && yarn test:integration || echo
after_success: "yarn coveralls"
cache:
  yarn: true
  directories:
    - node_modules
branches:
  only:
    - master
